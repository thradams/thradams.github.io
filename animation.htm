<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
   <title>Thiago's website</title>
   <link href="trastyle.css" type="text/css" rel="stylesheet" />
   <link rel="alternate" type="application/rss+xml" title="RSS" href="http://wwww.thradams/codeblog/rss.xml" />
</head>

<body>
   <div class="pageheader">

      <h2>Thiago R. Adams website</h2>
      <p>
         <a class="linkbox" href="index.htm">HOME</a>
         <a class="linkbox" href="codeblog.htm">CODE-BLOG</a>
         <a class="linkbox" href="about.htm">ABOUT</a>
         <br />
      </p>
   </div>

   <article>
  
      <!-- Page content begin -->
<h2> Kinect Animations</h2>

<p>Nowadays is very common to find inertia animations in screens elements in multi-touch devices like tablets and smart phones.One of these animations is a page sliding. When youmove the virtual page it goes like it had mass and because of the effect of friction it stop after some seconds.</p>


<p>This article will show the equations to simulate this animation, including impact in a spring-damper border.</p>

<pre>
         -&gt;  
        v0,  x0        |
     .--.     
.----' m '--.          /\/\/\--| spring
'-()-----()-'          ----]===| damper
----------------------------------------------
                       |
                     xborder
</pre>


<h2> Equations</h2>

<p>A body sliding on a floor will be by effect of a force called kinetic friction. This force is against the movement and it will slow the body until it stops.</p>

<p>We are not considering the effect of air, because wewant to simulate objects likes a paper and the airefect in this case is very low.</p>

<p>Because the force of the kinetic friction is constant the movement will have a constant acceleration.</p>


<p>(The acceleration will have the opposite sign of initial velocity. v0)</p>

<p>For this simulation we can specify the acceleration directly.</p>

<p>The equations of this movement are:</p>

<pre>
                          2
                       a t
#1  x(t) = x0 + v0 t + ----
                        2

#2  v(t) = v0 + a t

</pre>

<p>Where:</p>

<pre>

 v(t) : velocity
 x(t) : position
 x0   : initial position
 v0   : initial velocity
 a    : acceleration
 t    : time

</pre>

<p>Some other results are useful:</p>

<h3> When does it stop? (tstop)</h3>

<pre>
v(t) = v0 + a t

0    = v0 + a t

           v0
tstop = - ---
           a
</pre>

<h3> Where does it stop? (xstop) </h3>

<p>Replace t by tstop in </p>

<pre>

               2
             v0
xstop = x0 - ----
             2a

</pre>

<p>If xstop is before the xborder it means the page will not collide.</p>

<h3> When collision occurs? (tborder)</h3>

<p>if xstop &gt; xborder it means we will have collision with the border.</p>

<p>To find out when the collision occurs we solve for t in</p>

<p>equation </p>
<pre>
                          2
                       a t
xborder = x0 + v0 t + -----
                        2
</pre>

<p>solving for t give us:</p>

<pre>
                 ----------------------------
            +   |    2
         v0 -  \|  V0 - 2 a (x0 + xborder)
tborder = -------------------------------------
                         a
</pre>

<p>We have two solutions. The correct solution is when tborder &gt; 0 and &lt; tstop.</p>

<p>This solution must exist when xstop &gt; xborder so be aware of numeric rounding errors.</p>


<h3>  is the speed on collision ? (vborder)</h3>

<p>Replace tborder in </p>

<pre>
vborder = v0 + a tborder
</pre>

<h2> What will happen after collision?</h2>

<p>We use a spring and damper to stop the page.The main equation (Newton second law) is</p>

<pre>
Force = m x''

spring force = -k x
damper force = -b x'

</pre>
<p>Then the equation is:</p>
<pre>
x'' + b x' + k x = 0
</pre>

<p>Dividing by m</p>

<pre>
       b       k
x'' + --- x'+ --- x = 0
       m       m
</pre>

<p>Where:</p>

<pre>
 k  : spring constant
 b  : viscous damping coefficient
 m  : mass
 x  : x(t) position
 x'  : v(t) velocity
 x'' : a(t) acceleration
</pre>
<p>The following parameters are then defined:</p>
<pre>
      -------
      |  k
w0 =  | ---
     \|  m
</pre>

<p>w0 is called the natural frequency of the system</p>

<pre>
       b
Z = --------
      ------
   2 \|  m k
</pre>

<p>The second parameter, Z, is called the damping ratio.</p>

<p>The differential equation now becomes</p>
<pre>
                    2
x'' + 2 Z w0 x' + w0 x = 0
</pre>

<p>The value of Z determines the behavior of the system.</p>

<p>When Z = 1, the system is said to be critically damped. A critically damped system converges to zero as fast as possible without oscillating.</p>

<p>When Z &gt; 1, the system is over-damped. An over-damped door closer will take longer to close than a critically damped door would.</p>


<p>Finally, when 0 &lt;= Z &lt; 1, the system is under-damped.In this situation, the system will oscillate at the natural damped frequency.</p>


<p>The system we will choose is critically damped. It means we have some combination of k, m, b, that results Z = 1;</p>

<p>The solution for this system (z = 1) is:</p>

<pre>
        -w0 t
x(t) = e      (C1 + C2 t)

C1 = x(0)

C2 = x'(0) + w0 x(0)

x'(0) = v(0) = vborder
</pre>

<h2> Putting all together </h2>

<p>Given the initial velocty v0, initial position x0, and xborder (see picture) the algorithm will produce an equation x(t) for the movement.</p>


<p>(a, m, k will be constants)</p>

<h3> In case of no collision:</h3>

<p>From t = 0 to t &lt; tstop.</p>
<pre>
                          2
                       a t
#1  x(t) = x0 + v0 t + ----
                        2

</pre>
<h3> Before and After collision</h3>

<p>The page started before the border ant hit the border at tborder.</p>

<p>From t = 0 to t &lt; tborder.</p>
<pre>
                          2
                       a t
#1  x(t) = x0 + v0 t + ----
                        2
</pre>
<p>After tborder</p>
<pre>
       -w0 t
x(t) = e      (C1 + C2 t)

C1 = x(0)

C2 = vborder + w0 x(0)

      ------
      |  k
w0 =  | ---
     \|  m

</pre>

<p>The system of coordinates is in the border in this case.You can change values for w0 to modify the response.</p>

<p>Some criteria to stop is missing here.</p>

<h3> After the border x0 > xborder</h3>

<p>The page started after the border.The spring-damper acts in the page.</p>

<pre>

       -w0 t
x(t) =  e      (C1 + C2 t)


C1 = x(0)
C2 = v0 + w0 C1

      -------
      |  k
w0 =  | ----
     \|  m
</pre>

<p>The system of coordinates is at xborder.Some criteria to stop is missing here.</p>



<h2> Details</h2>

<p>Some details are missing to create a complete simulation.</p>


<p>Please note the system of coordinates moved in the border equations. Time is also reset.</p>



<h2> References</h2>

<p></p>

<h2> History</h2>

<ul>
<li> 14/02/2012 Appendix added</li>
<li> 29/01/2012 reviewed</li>
<li> 28/01/2012 published</li>
</ul>


<h2> Appendix</h2>

<p>Using the same equations we can solve the followingsystem to create a page simulation.</p>

<p>The view is fixed and the page moves.</p>

<p>In this case the aceleration will have two components in x and y.</p>

<pre>


               _________________
              |    ________     |
              |   |        |    |
  |/\/\/      |   |        |    |    /\/\/\| spring 
  |===[--     |   |View    |    |    --]===| damper
              |   |________|    |
              |_________________|
                     Page


                   _________________
                  |________         |
                  |        |        |
  |/\/\/          |        |        |/\/\/\| spring 
  |===[--         |View    |        |--]===| damper
                  |________|        |
                  |_________________|
                         Page



          _________________
         |         ________|
         |        |        |
  |/\/\/\|        |        |         /\/\/\| spring 
  |===[--|        | View   |         --]===| damper
         |        |________|
         |_________________|
               Page


</pre>


<!-- Page content end --> 
</article> 
 
</body> 
</html>  