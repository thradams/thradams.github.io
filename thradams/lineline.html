<!DOCTYPE html>
<html>
<head>
   <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href = "default.min.css">
  <script src = "highlight.min.js"></script>
  <script>hljs.highlightAll(); </script>
 <link rel = "stylesheet" href = "style.css"/>
</head>
<body>
<a class = "linkbox" href = "index.html" > HOME</a>
<h2 id="toc_0">Line segment intersection formula</h2>

<p>Given the lines segment a and b.</p>

<pre><code> line a
 (ax0, ay0)--------(ax1, ay1)

 line b
 (bx0, by0)--------(bx1, by1)
</code></pre>

<p>And the parametric equation for line a and b.</p>

<pre><code>
  ax(ta) = ax0 + (ax1 - ax0) * ta;
  ay(ta) = ay0 + (ay1 - ay0) * ta;

  bx(tb) = bx0 + (bx1 - bx0) * tb;
  by(tb) = by0 + (by1 - by0) * tb;
  
</code></pre>

<p>Renaming
<code>
  (ax1 - ax0) for adx 
  (ay1 - ay0) for ady
  (bx1 - bx0) for bdx
  (by1 - by0) for bdy
</code></p>

<pre><code>  ax(ta) = ax0 + adx * ta;
  ay(ta) = ay0 + ady * ta;

  bx(tb) = bx0 + bdx * tb;
  by(tb) = by0 + bdy * tb;  
</code></pre>

<p>Making </p>

<pre><code>  ax(ta) = bx(tb);
  ay(ta) = by(tb);
</code></pre>

<pre><code>  ax0 + adx * ta = bx0 + bdx * tb;  #1
  ay0 + ady * ta = by0 + bdy * tb;  #2
</code></pre>

<p>Isolating ta in #1
<code>
         (bx0 + (bdx*tb) - ax0)
    ta = ----------------------
                  adx
</code></p>

<p>Now replace ta in #2
<code>
          ady*(bx0 + (bdx*tb) - ax0)
     ay0 + -------------------------- = by0 + (bdy*tb)
                     adx
</code></p>

<p>Isolation tb</p>

<pre><code>         ((adx*(by0 - ay0)) + (ady*(ax0 - bx0)))
    tb = ---------------------------------------
                 ((ady*bdx) - (bdy*adx))
</code></pre>

<p>Now we have everthing.</p>

<p>The lines will intercept if    0 &gt;= ta &lt;= 1 and    0 &gt;= tb &lt;= 1</p>

<pre><code class="language-cpp">
    var adx = (ax1 - ax0);
    var ady = (ay1 - ay0);

    var bdx = (bx1 - bx0);
    var bdy = (by1 - by0);

    if (((ady * bdx) - (bdy * adx)) == 0)
    {
       //no intersection 
    }


    if (adx == 0)
    {
       //no intersection 
    }

    var tb = ((adx * (by0 - ay0)) + (ady * (ax0 - bx0))) / ((ady * bdx) - (bdy * adx));
    var ta = (bx0 + (bdx * tb) - ax0) / adx;

    
    // intersection position 
    var ax = ax0 + adx * ta;
    var ay = ay0 + ady * ta;

</code></pre>
</body></html>