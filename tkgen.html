<!DOCTYPE html>
<html>
<head>
   <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href = "default.min.css">
  <script src = "highlight.min.js"></script>
  <script>hljs.highlightAll(); </script>
 <link rel = "stylesheet" href = "style.css"/>
</head>
<body>
<a class = "linkbox" href = "index.html" > HOME</a>
<a class = "linkbox" href = "codeblog.html">CODE-BLOG</a>
<a class = "linkbox" href = "about.html">ABOUT </a>
<h1 id="toc_0">TkGen - A Lexical Analyzer Generator</h1>

<h2 id="toc_1">What is tkgen?</h2>

<p>TkGen is a lexical analyzer generator (also known as scanner generator) for C++, written in C++.</p>

<h3>Input format</h3>

<p>Basicaly the input file a list of token names and regular expressions.
Input file sample:</p>

<pre><code>NUMBER
[0-9]+(\.[0-9]+)?
SYMBOL
[a-zA-Z]+([0-9]+[a-zA-Z]+)?
BLANKS
[\ \n]+
OPEN
\(
CLOSE
\)
MULTI
\*
DIV
\/
PLUS
\+
MINUS
\-
}}}
</code></pre>

<p>The output is a C++ header file with a DFA (deterministic finite automaton) transitions information. </p>

<p>The generated file is combined with two template classes to create the final scanner which recognizes tokens from a source of characters that can be a file or string for instance.</p>

<p>===Try tkgen online===</p>

<p>[[<a href="http://www.thradams.com/webtkgen.aspx%5D">http://www.thradams.com/webtkgen.aspx]</a>]</p>

<p>===How to use the generated code?===</p>

<p>To create a Tokenizer you will need two more classes
* <strong>TokenizerStream</strong>
* <strong>Tokenizer</strong></p>

<p>Both can be found [[tkgencode.htm|Tokenizer and InputStream]] tokenizer</p>

<p>Complete sample
{{{cpp</p>

<h1 id="toc_2">include &quot;stdafx.h&quot;</h1>

<h1 id="toc_3">include <iostream></h1>

<h1 id="toc_4">include <fstream></h1>

<p>//download it from <a href="http://www.thradams.com/codeblog/tkgencode.htm">http://www.thradams.com/codeblog/tkgencode.htm</a></p>

<h1 id="toc_5">include &quot;tokenizer.h&quot;</h1>

<p>//generated by the compiler. copy from the online tkgen and paste it in your file</p>

<h1 id="toc_6">include &quot;statemachine.h&quot;</h1>

<p>int _tmain(int argc, <em>TCHAR* argv[])
{
  std::wifstream ss(argv[1]);
  FileTokenizerStream&lt;wchar</em>t&gt; fileStream(ss);
  Tokenizer<StateMachine, FileTokenizerStream<wchar_t> &gt; tk(fileStream);</p>

<p>std::wstring lexeme;
  Tokens token;
  while (tk.NextToken(lexeme, token))
  { 
      std::wcout  &lt;&lt; TokensToString(token) &lt;&lt; L&quot;: &#39;&quot; &lt;&lt; lexeme &lt;&lt; L&quot;&#39;&quot; &lt;&lt; std::endl;<br>
  }
}
}}}</p>

<p>Input file details</p>

<p>Tkgen accepts these regex syntax:
{{{
?  : optional
+  : one or more
*  : zero or more
.  : any char
[] : or-groups
\  : escape
0-9: range inside groups
(Note: ^ is not yet supported)
}}}</p>

<p>===Download sample===</p>

<p>[[tkgensample1.zip]]</p>

<p>===References===</p>

<ul>
<li>&quot;Compilers: Principles, Techniques, and Tools&quot;, Alfred V. Aho , Ravi Sethi , Jeffrey D. Ullman</li>
<li>An Implementation of Regular Expression Parser in C# - [[<a href="http://www.codeproject.com/KB/recipes/re_expression_parser.aspx%5D">http://www.codeproject.com/KB/recipes/re_expression_parser.aspx]</a>]</li>
</ul>

<p>===Acknowledgments===</p>

<ul>
<li>Cesar Mello for the incentive over the years to implement this kind of tokenizer generator based on DFAs. - Marcelo B. for the feedbacks and patience talking about NFA DFA etc.</li>
</ul>

<p>===History===</p>

<ul>
<li>18 nov 2009 : web page released</li>
<li>02 dez 2010 : compact version added [[tkgencode.htm|code]]</li>
</ul>
</body></html>